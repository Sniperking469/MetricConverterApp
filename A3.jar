import java.util.Scanner;

public class A3 {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("Welcome to Metric Converter!\n");
        System.out.println("Please input your query. For example, '1 km = m'.");
        System.out.println("Enter 'exit' or '-1' to exit the program.\n");

        while (true) {
            System.out.print("Enter your query: ");
            String input = scanner.nextLine().trim().toLowerCase();

            if (input.equals("exit") || input.equals("-1")) {
                System.out.println("Thank you for using Metric Converter! Goodbye!");
                break;
            }

            try {
                String[] parts = input.split(" ");

                if (parts.length == 4 && parts[2].equals("=")) {
                    double value = Double.parseDouble(parts[0]);
                    String fromUnit = parts[1];
                    String toUnit = parts[3];

                    if (isValidConversion(fromUnit, toUnit)) {
                        double result = convert(value, fromUnit, toUnit);
                        System.out.printf("%.2f %s = %.2f %s\n\n", value, fromUnit, result, toUnit);
                    } else {
                        System.out.println("Conversion not supported. Please input another query, e.g., '1 kg = lb'.\n");
                    }
                } else {
                    throw new IllegalArgumentException();
                }
            } catch (Exception e) {
                System.out.println("Your input is not currently handled by this app. Please input another query, e.g., '1 kg = lb'.\n");
            }
        }

        scanner.close();
    }

    public static boolean isValidConversion(String fromUnit, String toUnit) {
        String validConversions = "kg lb lb kg km mile mile km cm inch inch cm gram ounce ounce gram";
        return validConversions.contains(fromUnit + " " + toUnit);
    }

    public static double convert(double value, String fromUnit, String toUnit) {
        switch (fromUnit + " to " + toUnit) {
            case "kg to lb":
                return value * 2.20462;
            case "lb to kg":
                return value * 0.453592;
            case "km to mile":
                return value * 0.621371;
            case "mile to km":
                return value * 1.60934;
            case "cm to inch":
                return value * 0.393701;
            case "inch to cm":
                return value * 2.54;
            case "gram to ounce":
                return value * 0.035274;
            case "ounce to gram":
                return value * 28.3495;
            default:
                throw new IllegalArgumentException("Conversion not supported");
        }
    }
}
